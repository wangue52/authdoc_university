<!-- templates/etudiant/paiement_succes.html -->
{% extends "etudiant/base_etudiant.html" %}

{% block title %}Paiement Réussi - {{ demande.reference }}{% endblock %}

{% block etudiant_content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Paiement Effectué avec Succès</h1>
</div>

<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="alert alert-success text-center" role="alert">
            <i class="bi bi-check-circle-fill" style="font-size: 3rem;"></i>
            <h2 class="mt-3">Paiement Confirmé !</h2>
            <p class="lead">Votre paiement pour la demande <strong>{{ demande.reference }}</strong> a été validé.</p>
            <p>Votre demande est maintenant soumise et sera traitée prochainement par notre service.</p>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Détails de la Transaction</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Référence Demande:</strong> {{ demande.reference }}</p>
                        <p><strong>Type de Service:</strong> {{ demande.type_service.value }}</p>
                        <p><strong>Date de Paiement:</strong> {{ now.strftime('%d/%m/%Y à %H:%M') }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Méthode de Paiement:</strong> {{ demande.methode_paiement.value }}</p>
                        <p><strong>Montant Payé:</strong> <span class="text-success fw-bold">{{ "{:,.0f} FCFA"|format(demande.montant_total) }}</span></p>
                        <!-- ID de transaction simulé -->
                        <p><strong>ID de Transaction:</strong> <code>TXN-{{ "%06d"|format(demande.id) }}-{{ now.strftime('%Y%m%d') }}</code></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Prochaines Étapes</h5>
            </div>
            <div class="card-body">
                <ol>
                    <li>Votre demande est en attente de réception par le service COURIEL.</li>
                    <li>Le service COURIEL recevra votre demande et créera un dossier physique.</li>
                    <li>Le traitement manuel de votre document commencera.</li>
                    <li>Une fois traité, un document sécurisé vous sera renvoyé.</li>
                </ol>
                <p>Vous pouvez suivre l'état de votre demande à tout moment depuis votre <a href="/etudiant/demandes">tableau de bord</a>.</p>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="/etudiant/demandes" class="btn btn-primary btn-lg">
                <i class="bi bi-list-task me-1"></i> Voir Mes Demandes
            </a>
            <a href="/" class="btn btn-outline-secondary btn-lg ms-2">
                <i class="bi bi-house me-1"></i> Accueil
            </a>
        </div>
    </div>
</div>
{% endblock %}
